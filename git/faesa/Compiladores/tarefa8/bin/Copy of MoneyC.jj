 /* MoneyC.jj - compilador final fodao */options{  JDK_VERSION = "1.5";  DEBUG_PARSER = true;  DEBUG_TOKEN_MANAGER = false;}PARSER_BEGIN(MoneyC)import java.io.*;import java.util.*;public class MoneyC{  static Tabela tab = new Tabela();  public static void main(String args []) throws ParseException  {        MoneyC analisador = null;      try {         analisador = new MoneyC(new FileInputStream(args [0]));         analisador.inicio();      }      catch(FileNotFoundException e) {         System.out.println("Erro: arquivo não encontrado");      }      catch(TokenMgrError e) {         System.out.println("Erro léxico\n" + e.getMessage());      }            catch(ParseException e) {         System.out.println("Erro sintático\n" + e.getMessage());      }  }}PARSER_END(MoneyC)SKIP : { " " | "\t" | "\r" | "\n" |  "/*" : multilinecomment |  "//" : comment}< comment > SKIP:{  "\r" | "\n":DEFAULT | < ~[] > }< multilinecomment > SKIP:{  "*/":DEFAULT | < ~[] >}TOKEN :{  < VARIAVEL : "$" ([ "a"-"z", "A"-"Z"])* (["_", "0"-"9" ])* >| < INT : ([ "0"-"9" ])+ >| < STRING : "\"" ( ~["\""] )* "\"">| < IDENTIFICADOR_VARIAVEL : "VAR" >| < FIM_COMANDO : ";" >| < TIPO_STRING : "string" >| < TIPO_INTEIRO : "int" >| < ENTRADA_DADOS : "leia" >| < REL_MAIOR_IGUAL : ">=">| < REL_MENOR_IGUAL : "<=">| < REL_MAIOR : ">">| < REL_MENOR : "<">| < REL_IGUALDADE : "==">| < REL_DIFERENCA : "!=">| < ATRIBUICAO : ":=" >| < SAIDA_DADOS : "exibe" >| < POTENCIA : "^" >| < MULTIPLICACAO : "*" >| < DIVISAO : "/" >| < ADICAO : "+" >| < SUBTRACAO : "-" >| < CONCATENACAO : "." >| < LOGICO_E : "&&" >| < LOGICO_OU : "||" >| < LOGICO_NAO : "!" >| < SE : "SE" >| < SENAO : "SENAO" >| < FIM_SE : "FIM_SE" >| < ENQUANTO : "ENQUANTO" >| < FIM_ENQUANTO : "FIM_ENQUANTO" >| < ABRE_EXPRESSAO : "(" >| < FECHA_EXPRESSAO : ")" >| < ABRE_BLOCO : "{" >| < FECHA_BLOCO : "}" >| < VIRGULA : "," >| < NOME_FUNCAO : "_" (["_", "a"-"z", "A"-"Z"])+ (["0"-"9","a"-"z", "A"-"Z" ])* >}void inicio() : {System.out.println("inicio");}{     (bloco_codigo()) (funcao())* < EOF >}void funcao():{}{	  tipo_variavel() < NOME_FUNCAO >  < ABRE_EXPRESSAO > (declaracao_parametros())? < FECHA_EXPRESSAO >  bloco_codigo()}void declaracao_parametros ():{}{  LOOKAHEAD(3) tipo_variavel() < VARIAVEL >| tipo_variavel() < VARIAVEL > <VIRGULA > declaracao_parametros()  }void bloco_codigo ():{}{	< ABRE_BLOCO > (linha_comando())* < FECHA_BLOCO >| (linha_comando())*}void linha_comando() : {} {    (      comando_exibe()    | comando_declaracao()    | LOOKAHEAD(2) comando_atribuicao()    | comando_fluxo_se()	| comando_fluxo_enquanto()	|LOOKAHEAD(2) chamada_funcao()	)	 <FIM_COMANDO>}void comando_exibe() :{  Token t;  }{    < SAIDA_DADOS > <ABRE_EXPRESSAO > (<STRING> | expressao_aritmetica(null))  ([< VIRGULA > (<STRING> | expressao_aritmetica(null) )]) <FECHA_EXPRESSAO >}void comando_declaracao() :{Token t; char tp; Simbolo simb;}{  <IDENTIFICADOR_VARIAVEL>  (      tp = tipo_variavel()	  	(	    t = <VARIAVEL>		  {		    simb = new Simbolo(tp, t.image);		    if (!(tab.inclui(simb))) System.out.println("Erro semantico\n" + simb.getNome() + " ja existe!");		      		  }		)	  (	    <VIRGULA>	    t = <VARIAVEL>	  	{	   	 simb = new Simbolo(tp, t.image);	   	 if (!(tab.inclui(simb))) System.out.println("Erro semantico\n" + simb.getNome() + " ja existe!");	  	}	  )*  )}void comando_atribuicao() :{  Token t;}{    t = <VARIAVEL>   {	if (!(tab.isExiste(t.image))) System.out.println("Erro semantico\n" + t.image + " nao foi declarado!");  }  <ATRIBUICAO>  expressao_aritmetica(null) }void comando_fluxo_se() :{}{  <SE>  <ABRE_EXPRESSAO > expressao_booleana()< FECHA_EXPRESSAO > bloco_codigo()  [<SENAO> bloco_codigo()]<FIM_SE>}void comando_fluxo_enquanto() :{}{  <ENQUANTO>    <ABRE_EXPRESSAO > expressao_booleana() < FECHA_EXPRESSAO > bloco_codigo()<FIM_ENQUANTO>}void chamada_funcao() :{}{  < NOME_FUNCAO > <ABRE_EXPRESSAO > [lista_parametros()] < FECHA_EXPRESSAO >}void lista_parametros() :{}{  expressao_aritmetica(null) (<VIRGULA > expressao_aritmetica(null))* }void expressao_booleana() : {}{    fator_expressao_booleana() ((< LOGICO_E > | < LOGICO_OU >) fator_expressao_booleana()) *}void fator_expressao_booleana() : { }{  (  	(		expressao_aritmetica(null)		(		     < REL_MAIOR >		   | < REL_MENOR >		   | < REL_MAIOR_IGUAL >		   | < REL_MENOR_IGUAL >		   | < REL_IGUALDADE >		   | < REL_DIFERENCA >	  	)		expressao_aritmetica(null)		| < LOGICO_NAO > <ABRE_EXPRESSAO > fator_expressao_booleana() <FECHA_EXPRESSAO >	)  )}void concatenacao_string(LinkedList<Item> listaExp_):{  Token t; Item item;  LinkedList<Item> listaExp;  if (listaExp_ == null)  	  listaExp = new LinkedList<Item>();	else		  listaExp = listaExp_;	}{	t = < STRING >	{	    	  item = new Item('s',t.image);  	  listaExp.add(item);  		}	 (t = < ADICAO >	 	{  	  		item = new Item('o',t.image);  	  		listaExp.add(item);  		}	 t = < STRING >	 {	  item = new Item('s',t.image);  	  listaExp.add(item);	 })* }void expressao_aritmetica(LinkedList<Item> listaExp_) :{  Token t;Item item;  LinkedList<Item> listaExp;  if (listaExp_ == null)  	  listaExp = new LinkedList<Item>();	else		  listaExp = listaExp_;}{	operadorMultiplicativo(listaExp)	(	  (t = < SUBTRACAO > | t = < ADICAO >)	  {  	  		item = new Item('o',t.image);  	  		listaExp.add(item);  		}	  	 operadorMultiplicativo(listaExp)	 )*	 {	   System.out.println("Saindo da exp");	   for(Item myitem:listaExp)	   {	     System.out.println(myitem.toString());	   }	 }}void operadorMultiplicativo(LinkedList<Item> listaExp) : {Token t;Item item;}{	potenciacao(listaExp)	(	  (	    t = < MULTIPLICACAO > | t = < DIVISAO >)	    {  	  		item = new Item('o',t.image);  	  		listaExp.add(item);  		} potenciacao(listaExp))*}  void potenciacao(LinkedList<Item> listaExp) : {Token t;Item item;}{	elemento(listaExp)	(	  t = < POTENCIA >	  {  	  		item = new Item('o',t.image);  	  		listaExp.add(item);  		}			   elemento(listaExp))*}void elemento(LinkedList<Item> listaExp):{Token t;Item item;}{  (    t = < SUBTRACAO >		{  	  		item = new Item('o',t.image);  	  		listaExp.add(item);  		}    )* unario(listaExp)}void unario(LinkedList<Item> listaExp):{Token t;Item item;}{  	t = < INT >  	{  	  item = new Item('i',t.image);  	  listaExp.add(item);  	}  	| <ABRE_EXPRESSAO > expressao_aritmetica(listaExp) < FECHA_EXPRESSAO >  	|  t = <VARIAVEL> 	  {		if (!(tab.isExiste(t.image))) System.out.println("Erro semantico\n" + t.image + " nao foi declarado!");	  }}char tipo_variavel() :{}{  (<TIPO_STRING> {return 's';}| <TIPO_INTEIRO>{return 'i';})  }